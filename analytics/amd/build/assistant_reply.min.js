define(["jquery","core/config","core_message/message_repository"],function(a,b,c){return{forMe:function(a){if(2!=a.members.length)return!1;if("undefined"==typeof b.assistantuserid)return console.error("No $CFG->assistantuserid defined"),!1;for(i in a.members)if(userid=a.members[i].id,userid!==a.loggedInUserId&&userid==parseInt(b.assistantuserid)&&(lastMessage=a.messages[a.messages.length-1],lastMessage.fromloggedinuser===!0))return!0;return!1},forwardMessage:function(b,d){var e=a(d.text).text();return c.sendMessageToAssistant(b,e).then(function(a){a.redirect?window.href=a.redirect:a.replies&&console.log(a.replies[0])})["catch"](Notification.exception)}}});