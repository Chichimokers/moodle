define(["jquery","core/ajax"],function(a,b){var c=function(c,d,e){var f=[];for(var g in e)f.push({name:g,value:e[g]});var h=a.Deferred(),i=b.call([{methodname:"core_get_fragment",args:{component:c,callback:d,args:f}}],!1);return i[0].done(function(a){h.resolve(a)}).fail(function(a){h.reject(a)}),h.promise()},d=function(b){b.children().each(function(b,c){var e=a(c);d(e)});var c=new Y.Node(b);b.empty(),b.remove(),c.get("childNodes")&&c.empty(),c.remove()};return{fragment_load:function(a,b,d){return c(a,b,d)},fragment_append:function(b,e,f,g,h){d(a("#fragment-html")),d(a("#ajax-import-scripts")),a.when(c("mod_assign","fragment",f)).then(function(b){a(g).append('<div id="fragment-html">'),a(g).append("</div>"),a("#fragment-html").append(b.html),a(h).append('<div id="ajax-import-scripts">'),a(h).append("</div>"),a("#ajax-import-scripts").append(b.javascript)})}}});